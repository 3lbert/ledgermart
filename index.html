<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Splash Screen</title>

<style>
  * { margin:0; padding:0; box-sizing:border-box; }

  body {
    background:#ffd35a;                 /* kuning komik */
    height:100vh;
    overflow:hidden;
    font-family:'Comic Sans MS', sans-serif;
  }

  /* Container Splash */
  #splash {
    position:fixed;
    inset:0;
    display:flex;
    flex-direction:column;
    justify-content:center;
    align-items:center;
    gap:25px;
    background:#ffd35a;
  }

  /* Logo */
  .splash-logo {
    width:320px;
    filter:drop-shadow(4px 4px 0 #000);
    animation:bounce 1s ease forwards;
  }

  @keyframes bounce {
    0% { transform:translateY(40px) scale(0.9); opacity:0; }
    70% { transform:translateY(-10px) scale(1.05); opacity:1; }
    100% { transform:translateY(0) scale(1); }
  }

  /* Loading Bar Frame (cartoon style) */
  .bar-frame {
    width:60%;
    height:35px;
    border:4px solid #000;
    border-radius:10px;
    background:white;
    overflow:hidden;
    box-shadow:6px 6px 0 #000;
    position:relative;
  }

  /* Isi bar */
  .bar-fill {
    height:100%;
    width:0%;
    background:#ff4d4d; /* merah cartoon */
    transition:width 0.2s ease;
  }

  /* Text */
  #loading-text {
    font-size:26px;
    color:#000;
    font-weight:bold;
    text-shadow:3px 3px 0 white;
  }
</style>
</head>

<body>

<div id="splash">
  <img src="BU-SOC Accounting Laboratory-01.png" class="splash-logo" alt="Logo">

  <div class="bar-frame">
    <div class="bar-fill" id="bar"></div>
  </div>

  <div id="loading-text">Loading 0%</div>
</div>

<script>
window.addEventListener("load", () => {

  // ========================================
  //  SEKALI DIDEFINISIKAN → TIDAK BUG 12%-37%
  // ========================================
  const assets = [
    "2.png",
    "alien.png",
    "customer_a.png",
    "customer_b.png",
    "customer_c.png",
    "thief_run.png"
  ];

  let loaded = 0;
  const total = assets.length;

  const bar = document.getElementById("bar");
  const text = document.getElementById("loading-text");

  function preload(src) {
    return new Promise(res => {
      let el;

      if (src.endsWith(".mp3") || src.endsWith(".wav")) {
        el = new Audio();
        el.src = src;
        el.addEventListener("canplaythrough", res);
      } else {
        el = new Image();
        el.src = src;
        el.onload = res;
      }
    });
  }

  async function startPreload() {

    for (let src of assets) {
      await preload(src);
      loaded++;

      let percent = Math.floor((loaded / total) * 100);

      // update UI
      bar.style.width = percent + "%";
      text.textContent = "Loading " + percent + "%";
    }

    // ===========================================
    // 100% → LANGSUNG MASUK GAME (NO DELAY)
    // ===========================================
    window.location.replace("toserba game.html");
  }

  startPreload();
});
</script>

</body>
</html>






